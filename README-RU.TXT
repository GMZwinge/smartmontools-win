Smartmontools для Windows,    автор Orsiris "Ozy" de Jong
Версия документа 1.3 (C) 2012-2013 http://www.netpower.fr
Перевод на русский Кислейко Илья, osterik@gmail.com. Пожалуйста, напишите мне, если заметите ошибку в переводе.
---------------------------------------------------------

[EDIT] Newer translation needed here, this document is out of date.

Параметры командной строки см. ниже

Smartmontools для Windows это альтернативная сборка пакета smartmontools (созданного Bruce Allen и Christian Franke), которая была сделана, чтоб иметь возможность быстрой и удобной установки smartmontools как сервиса, с поддержкой уведомлений на электронную почту и всплывающими окнами, с заранее настроенными политиками наблюдения за параметрами S.M.A.R.T.
Установщик может быть запущен в "тихом" режиме, используя параметры командной строки, что удобно для массового распространения, или в обычном графическом режиме для рядовых пользователей.

Во время установки генерируются файлы конфигурации (которые, конечно же, доступны для ручного редактирования).
Также создается служба "SmartD", которая автоматически стартует при запуске системы. Эта служба обнаруживает жесткие диски, за которыми может наблюдать smartmontools, и, в случае выявления ошибок, отправляет сообщение на почту и\или отображает уведомление на компьютере.
При этом в файл "smart.log" записывается вся доступная информация о параметрах SMART, и он прикрепляется к письму. Отчёт о выполненных действиях записывается в файл "erroraction.log"

Дополнительно, файл "smart.log" остаётся на диске и содержит все накопленные данные о параметрах SMART, на случай обращения по гарантии.

Данное программное обеспечение(ПО) и установщик распространяются под GPL лицензией. Автор не несет какую-либо ответственность за проблемы или ущерб, которые могут возникнуть при использовании данного ПО.

Тем не менее - не стесняйтесь писать на электронную почту ozy [at] netpower.fr, я могу чем-нибудь помочь в моё свободное время.
Также, если вам понравился проделанный мною труд или вы используете ПО у себя на работе, не стесняйтесь поддержать мою работу на сайте. 99% поступлений, вероятней всего, пойдёт кофе-машине :)

Установщик использует следующее программное обеспечение:

- smartmontools by Bruce Allen & Christian Franke, http://smartmontools.sourceforge.net
- sendEmail by Brandon Zehm, http://caspian.dotconf.net
- Inno Setup by Jordan Russel, http://www.jrsoftware.org
- Gzip by Free Software Foundation, Inc. Copyright (C) 1992, 1993 Jean-loup Gailly, http://gnuwin32.sourceforge.net/
- Base64 by Matthias Gдrtner, http://www.rtner.de/software/base64.htm
- dd by Chrysocome and John Newbigin, http://www.chrysocome.net/dd

Параметры командной строки 
-----------------------

smartmontools-win-6.1-4.exe [--short=S/../.././08] [--long=L/../../5/12] [--hddlist="/dev/pd0;/dev/csmi0,1"] [--checkhealth=(yes|no)] [--checkataerrors=(yes|no)] [--checkfailureusae=(yes|no)] [--reportselftesterrors=(yes|no] [--reportcurrentpendingsect=(yes|no)] [--reportofflinependingsect=(yes|no)] [--trackchangeusageprefail=(yes|no)] [--ignoretemperature=(yes|no)] [--powermode=(never|sleep|standby|idle)] [--maxskips=7] [-f source@mail.tld -t destination@mail.tld -s smtp.server.tld [-u smtpuser] [-p smtppassword] [--tls=no]] [--localmessages=(yes|no)] [--warningmessage="Your custom alert message"] [--compresslogs=(yes|no)] [--keepfirstlog=(yes|no)] [--sendtestmessage=(yes|no)] [/silent]

--short=S/../.././13 Регулярное выражение, определяющее расписание запуска краткого(базового) теста самопроверки диска, по умолчанию - каждый день в 8:00 (подробнее см. ниже или руководство по smartd.conf)
	You may also set this parameter to no if you don't want to run short selftests
--long=L/../../5/12 Регулярное выражение, определяющее расписание запуска полного(расширенного) теста самопроверки диска, по умолчанию - в пятницу в 8:00 (подробнее см. ниже или руководство по smartd.conf)
	You may also set this parameter to no if you don't want to run long selftests
--hddlist="/dev/pd0;/dev/pd1;/dev/sdc" Список дисков, разделённый двоеточиями. Если не указан - диски будут определены автоматически.
Пример: --hddlist="/dev/csmi0,0;/dev/csmi0,1" для Intel RAID из двух дисков (Т.к. автоматическое определение не всегда срабатывает с Intel RAID) 
--checkhealth=(yes|no) Наблюдать за статусом SMART, сообщать о возникших проблемах, по умолчанию включено
--checkataerrors=(yes|no) Сообщать о росте количества ошибок в журнале SMART «ошибки», по умолчанию включено
--checkfailureusage=(yes|no) Наблюдение за отказами в любых значениях "Usage" атрибутов. Это не-критичные атрибуты (температура, число запусков и т.п.) изменение которых не свидетельствует о скором отказе диска, но говорит о не оптимальном режиме работы диска, что может вызвать сокращение его срока службы. По умолчанию включено
--reportselftesterrors=(yes|no) Сообщать о росте количества ошибок в журнале SMART «самопроверка», по умолчанию включено
--reportcurrentpendingsect=(yes|no) по умолчанию включено
--reportofflinependingsect=(yes|no) по умолчанию включено
--trackchangeusageprefail=(yes|no) Сообщать если значения атрибутов групп "Prefailure" (критичных) или "Usage"(использования) изменились со времени прошлой проверки, по умолчанию включено
--ignoretemperature=(yes|no) Не отслеживать изменения температуры, по умолчанию включено
--powermode=(never|sleep|standby|idle) = В каком состоянии энергосбережения должен находиться диск для запуска тестов. По умолчанию диск проверяется, если он не в спящем режиме.
--maxskips=N Максимальное количество тестов, пропущенных из-за несоответствия режимов энергосбережения, после которых тест будет запущен принудительно. По умолчанию =7

-f Адрес e-mail отправителя, с которого будут отправляться отчёты
-t Адрес e-mail получателя сообщений
-s SMTP-сервер
-u логин входа на SMTP-сервер (не обязательно)
-p пароль входа на SMTP-сервер(не обязательно)
--tls=(no|auto|yes) Использовать TLS для доступа на почтовый сервер, по умолчанию no
--localmessages=(no|yes) Показывать предупреждения и сообщения об ошибках на компьютере, где установлена программа, по умолчанию no
--warningmessage="Пользовательское сообщение об ошибке", если не установлено, то будет использоваться сообщение по умолчанию
--compresslogs=(no|yes) Архивировать журналы при отправке, по умолчанию yes
--keepfirstlog=(no|yes) Создать файл smart.(version).log, содержащий всю доступную информацию о всех дисках, по умолчанию yes
--sendtestmessage=(no|yes), Отправить тестовое сообщение, по умолчанию yes
/silent или /verysilent Параметры запуска установки в "тихом" режиме. Обратите внимание - эти параметры записываются через слэш "/", т.к. это переключатели внутренней логики установщика Inno Setup

См. примеры ниже

Регулярные выражения, определяющее расписание запуска теста самопроверки диска
----------------------------

Регулярные выражения должны выглядеть следующим образом: T/MM/DD/d/HH, где:
T = Тип теста (S=краткий(short), L=полный(long))
MM = Месяц (январь = 01, декабрь = 12)
DD = Число месяца (01...31)
d = День недели (понедельник = 1, воскресенье = 7)
HH = Час в 24-х часовом формате

Параметры даты\времени можно заменить на точки, которые рассматриваются как шаблоны. Следующее регулярное выражение запланирует проведение полного теста каждые вторник и пятницу в 2 часа ночи:

L/../../[2,5]/02

Примеры
--------

Простейший сценарий установки:

smartmontools-win-6.1-4.exe -f sourcemail@example.tld -t destination@example.tld -s smtp.of.your.isp.com /silent

Эта команда установит smartmontools в "тихом" режиме, настроит оповещения по почте, авто-определение дисков, используя все средства мониторинга, запланирует проведение краткого теста каждый день в 8 утра и полного теста в пятницу в 12 часов.

Другой пример использует почтовый сервер вашего провайдера (с авторизацией и TLS-шифрованием), не игнорирует колебания температуры диска, отображает предупреждающие сообщения на компьютере и будет производить краткий тест каждый день в 9 утра и полный тест во вторник и воскресенье в 2 часа ночи для дисков /dev/pd0 и /dev/csmi0,1:

smartmontools-win-6.1-4.exe -f sourcemail@example.tld -t destination@example.tld -s smtp.of.your.isp.com -u username@smtp.server.tld -p pA55W0RD --tls=yes --ignoretemperature=no --hddlist=/dev/pd0;/dev/csmi0,1 --short=S/../.././09 --long=L/../../[2,7]/02 --localmessages=yes /silent


--------------------------------------------------------------

